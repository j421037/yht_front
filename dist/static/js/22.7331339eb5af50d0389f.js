webpackJsonp([22],{BB2A:function(e,t){},UhRA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{total:0,loading:!1,btnDisable:!1,manual:0,CustomerTypes:[{label:"公共",value:0},{label:"部门",value:1}],CustomerType:"公共"}},methods:{query:function(e){var t=this;this.loading=!0,e.type=this.CustomerTypes.filter(function(e){return e.label==t.CustomerType})[0].value,console.log(e),this.$store.dispatch("getCustomer",e).then(function(){t.loading=!1})},CustomerTypeChange:function(){++this.manual},receiveCustomer:function(e){var t=this;this.btnDisable=!0,this.$confirm("认领客户 <"+e.name+">","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.receive(e.id)}).catch(function(){t.btnDisable=!1})},receive:function(e){var t=this;this.$store.dispatch("receiveCustomer",{id:e}).then(function(){"success"==t.$store.state.user.receiveStatus.status?(t.$notify.success({title:"操作成功",message:"请到 <我的客户> 中查看信息"}),++t.manual):t.$notify.error({title:"操作失败",message:t.$store.state.user.receiveStatus.error}),t.btnDisable=!1})}},computed:{customers:function(){var e=this.$store.state.user.customerList;return e.total&&(this.total=e.total),e.data}},components:{pagination:function(){return n.e(53).then(n.bind(null,"g32C"))}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"public-customer"},[n("el-radio-group",{staticStyle:{"margin-bottom":"15px"},on:{change:e.CustomerTypeChange},model:{value:e.CustomerType,callback:function(t){e.CustomerType=t},expression:"CustomerType"}},e._l(e.CustomerTypes,function(e,t){return n("el-radio-button",{key:t,attrs:{label:e.label}})})),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.customers,border:"",strip:"",height:"80%"}},[n("el-table-column",{attrs:{type:"index"}}),e._v(" "),n("el-table-column",{attrs:{label:"客户",prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:"地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.province))]),e._v(" \n                "),n("span",[e._v(e._s(t.row.city))]),e._v(" \n                "),n("span",[e._v(e._s(t.row.area))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"需求",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",title:"需求",width:"200",trigger:"hover",content:t.row.demand}},[t.row.demand?n("a",{attrs:{slot:"reference",href:"javascript:void(0)"},slot:"reference"},[e._v(e._s(t.row.demand.substring(0,20))+"...")]):e._e()])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"发布时间",prop:"time"}}),e._v(" "),n("el-table-column",{attrs:{label:"领取次数",prop:"recount"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(n){e.receiveCustomer(t.row)}}},[e._v("领取")])]}}])})],1),e._v(" "),n("pagination",{attrs:{total:e.total,handle:e.query,refresh:e.manual}})],1)},staticRenderFns:[]};var s=n("VU/8")(a,r,!1,function(e){n("BB2A")},"data-v-94c9bb8a",null);t.default=s.exports}});