webpackJsonp([57],{Im3v:function(e,t){},Wkdy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("fZjL"),o=r.n(a),l={name:"ModifyOffer",props:{row:{type:Object}},data:function(){return{Form:{operate_val:0,operate:1,id:0},submiting:!1}},methods:{handleOpen:function(){this.Form.operate_val=Number(this.row.opval),this.Form.operate=Number(this.row.operate.value),this.Form.id=this.row.id},handleClose:function(){this.$store.dispatch("SetBaseProductConfig",{field:"Price.ModifyOffer.visible",value:!1})},submit:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$store.dispatch("ModifyOffer",e.Form).then(function(){"success"==e.$store.state.user.ModifyOffer.status&&(e.$notify.success("修改成功"),e.$emit("Reload"),e.handleClose())})})},validateField:function(e,t,r){/^[1-9]+(\.?\d+){0,1}$/.test(t)?r():r(new Error("请输入数字"))}},computed:{visible:function(){return this.$store.state.user.BaseProduct.Price.ModifyOffer.visible},loaded:function(){return 0!==o()(this.row).length},operates:function(){return[{label:"x",value:1},{label:"÷",value:2},{label:"+",value:3},{label:"-",value:4}]},operateLabel:function(){var e=this,t="";return this.operates.forEach(function(r){r.value==e.Form.operate&&(t=r.label)}),t}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.loaded?r("div",{staticClass:"modify-offer-wallpaper"},[r("el-dialog",{attrs:{title:"修改报价",visible:e.visible,"before-close":e.handleClose,width:"30%"},on:{"update:visible":function(t){e.visible=t},opened:e.handleOpen}},[r("el-form",{ref:"form",attrs:{model:e.Form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"品牌"}},["object"==typeof e.row.manager?r("div",[e._v(e._s(e.row.manager.brand))]):e._e()]),e._v(" "),r("el-form-item",{attrs:{label:"客户名称"}},[r("div",[e._v(e._s(e.row.customer))])]),e._v(" "),r("el-form-item",{attrs:{label:"计算公式",prop:"operate"}},[r("div",{staticStyle:{display:"flex"}},[r("el-input",{staticStyle:{flex:"1"},attrs:{value:"面价",disabled:!0,placeholder:"请输入数字"}}),e._v(" "),r("el-select",{staticStyle:{margin:"0 5px",flex:"1"},model:{value:e.Form.operate,callback:function(t){e.$set(e.Form,"operate",t)},expression:"Form.operate"}},e._l(e.operates,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),r("el-form-item",{staticStyle:{margin:"0",flex:"2"},attrs:{prop:"operate_val",rules:[{validator:e.validateField,trigger:"blur"},{required:!0,trigger:"blur",message:"请输入内容"}]}},[r("el-input",{attrs:{placeholder:"请输入数字"},model:{value:e.Form.operate_val,callback:function(t){e.$set(e.Form,"operate_val",t)},expression:"Form.operate_val"}},[1==e.row.manager.method.value?r("template",{slot:"append"},[e._v("元")]):e._e(),e._v(" "),0==e.row.manager.method.value?r("template",{slot:"append"},[e._v("百分点")]):e._e()],2)],1)],1)])],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.submiting},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提 交")])],1)],1)],1):e._e()},staticRenderFns:[]};var s=r("VU/8")(l,i,!1,function(e){r("Im3v")},null,null);t.default=s.exports}});