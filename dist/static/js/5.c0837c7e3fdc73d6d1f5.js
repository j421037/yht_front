webpackJsonp([5],{OKck:function(t,e){},Tv48:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i={position:"bottom",time:2e3,closeIcon:"close",close:!0,successIcon:"check_circle",infoIcon:"info",warningIcon:"priority_high",errorIcon:"warning"},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},a="undefined"==typeof window,c=20141223,l=s.default.extend({name:"toast-message",data:function(){return{messages:[]}},methods:{createAction:function(t,e,n,s){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t("mu-button",{props:{icon:i,flat:!i,color:s.color?"#fff":"secondary"},style:i?{width:"36px",height:"36px"}:{},slot:"action",on:{click:function(){return n&&n(s.id)}}},[e])},message:function(t){var e="toast_id_"+c++;return this.messages.push(o({},t,{id:e,open:!0})),e},close:function(t){var e=this;if(t){var n=this.messages.filter(function(e){return e.id===t})[0];n&&(n.open=!1,setTimeout(function(){if(e.messages){var t=e.messages.indexOf(n);-1!==t&&e.messages.splice(t,1)}},500))}}},render:function(t){var e=this;return t("div",{staticClass:"mu-toast-plugin",style:{display:"none"}},this.messages.map(function(n){var s=n.close?e.createAction(t,t("mu-icon",{props:{value:i.closeIcon},style:{"margin-right":0}}),function(t){return e.close(t)},n,!0):void 0;return t("mu-snackbar",{props:{color:n.color,textColor:n.textColor,open:n.open,position:n.position},key:n.id},[n.icon?t("mu-icon",{props:{left:!0,value:n.icon}}):""].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n.actions&&n.actions.length>0?n.actions.map(function(s){var i=s.action,r=s.click;return e.createAction(t,i,r,n)}):[]),[n.message,s]))}))}}),u=void 0;function d(t){if(!a)return u||(u=new l({el:document.createElement("div")}),document.body.appendChild(u.$el)),u.message(t)}function f(t){u&&u.close(t)}var m={config:function(t){if(!t||Array.isArray(t)||"object"!==(void 0===t?"undefined":r(t)))return i;for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i},message:function(t){if(t){t="string"==typeof t?{message:t}:t;var e=o({time:i.time,position:i.position,close:i.close},t),n=d(e);return e.time>0&&setTimeout(function(){return f(n)},e.time),n}}};["success","error","info","warning"].forEach(function(t){m[t]=function(e){if(e)return e="string"==typeof e?{message:e,color:t,icon:i[t+"Icon"]}:o({},e,{color:t,icon:i[t+"Icon"]}),m.message(e)}}),m.close=function(t){return f(t)},m.install=function(t,e){m.config(e),t.prototype.$toast=m};var h=m,p=n("mXTp"),v={props:{navsTakeUp:{type:Boolean,default:!1}},data:function(){return{loading:!0,AricleId:0,AnswerForm:{content:"",article_id:""},AddComment:"",CurrentAnswerId:0,ContentItemId:0,SubmitAnswerStatus:!1,isFocus:!1,CuerrentCommentsFootIndex:"",UECommand:"",toolbars:["undo","redo","bold","indent","italic","underline","strikethrough","subscript","fontborder","superscript","formatmatch","selectall","horizontal","removeformat","time","date","unlink","cleardoc","fontfamily","fontsize","paragraph","simpleupload","insertimage","link","emotion","spechars","searchreplace","justifyleft","justifyright","justifycenter","justifyjustify","forecolor","backcolor","rowspacingtop","rowspacingbottom","imagenone","imageleft","imageright","imagecenter","lineheight","touppercase","tolowercase"]}},methods:{init:function(){this.AricleId=this.$route.params.id;var t={id:this.AricleId};this.getArticle(t)},getArticle:function(t){var e=this;this.$store.dispatch("ArticleOne",t).then(function(){e.AnswerForm.article_id=e.article.id,e.loading=!1,e.getAnswer(e.article.id),e.getAgree(e.article.id)})},getAnswer:function(t){this.$store.dispatch("ArticleAnswer",{article_id:t}).then(function(){})},getAgree:function(t){this.$store.dispatch("ArticleAgree",{article_id:t})},SubmitAnswer:function(){var t=this;if(this.SubmitAnswerStatus=!0,""==this.AnswerForm.content)return!1;this.$store.dispatch("AddArticleAnswer",this.AnswerForm).then(function(){"success"==t.$store.state.user.AddArticleAnswer.status?(h.success("评论成功"),t.AnswerForm.content="",t.UECommand="cleardoc",t.SubmitAnswerStatus=!1,t.getAnswer(t.article.id)):h.error("操作失败")})},handleOpenComment:function(t){this.CurrentAnswerId=t},handleOpenCommentList:function(t){this.ContentItemId=t},handleAgree:function(){this.alreadyAgree||this.$store.dispatch("AricleAgreeClick",{article_id:this.AricleId})},handleGoEdit:function(){this.$refs.wapper.scrollTop=this.$refs.editor.offsetTop},handleInputFocus:function(t){this.isFocus=!0,this.CuerrentCommentsFootIndex=t},handleBodyClick:function(t){""!=this.CuerrentCommentsFootIndex&&(this.$refs.CommentsFoot[this.CuerrentCommentsFootIndex].contains(t.target)||(this.isFocus=!1))}},created:function(){this.init()},destoryed:function(){window.removeEventListener("click",this.handleBodyClick)},computed:{article:function(){return console.log(this.$store.state.user.ArticleOne),this.$store.state.user.ArticleOne},fixedStyle:function(){return 1==this.navsTakeUp?{left:"calc((100% - 65px - 1042px)/2 + 65px + 694px + 20px)"}:{left:"calc((100% - 210px - 1042px)/2 + 210px + 694px + 20px)"}},AnswerList:function(){return this.$store.state.user.ArticleAnswer},alreadyAgree:function(){return this.$store.state.user.ArticleAgree.alreadyAgree},AgreeNum:function(){return this.$store.state.user.ArticleAgree.count},user:function(){return this.$store.state.user.userInfo}},components:{"v-ueditor":p.a},directives:{focus:{inserted:function(t){t.focus()}}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"wapper",staticClass:"wapper"},[n("div",{staticClass:"artilce-container"},[n("div",{staticClass:"content-container "},[n("h1",{staticClass:"title"},[t._v(t._s(t.article.title))]),t._v(" "),n("p",{staticClass:"subtitle"},[n("span",[t._v(t._s(t.article.name))]),t._v(" "),n("span",[t._v(t._s(t.article.created))])]),t._v(" "),n("div",{staticClass:"content-body",domProps:{innerHTML:t._s(t.article.body)}}),t._v(" "),n("div",{staticClass:"thend"}),t._v(" "),n("div",{staticClass:"agree"},[n("div",{staticClass:"click-agree",class:{alreadyAgree:t.alreadyAgree},on:{click:t.handleAgree}},[t._m(0),t._v(" "),t.alreadyAgree?t._e():n("span",[t._v("赞一下 ("+t._s(t.AgreeNum)+")")]),t._v(" "),t.alreadyAgree?n("span",[t._v("已赞 "+t._s(t.AgreeNum))]):t._e()])]),t._v(" "),n("div",{ref:"editor",staticClass:"QuestionAnswers-Wrapper "},[n("div",{staticClass:"QuestionAnswers-answerAdd Item-Card"},[n("div",{staticClass:"AnswerAdd"},[n("div",{staticClass:"AnswerAdd-header"},[n("div",{staticClass:"AnswerAdd-info Author-info"},[n("span",{staticClass:"Author-info-avatar"},[n("img",{attrs:{src:"http://e.yhtjc.com/v2/public/img/default.png"}})]),t._v(" "),n("span",{staticClass:"AnswerAdd-user-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.user.name)+"\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),n("v-ueditor",{attrs:{defalutMsg:"开始编辑",command:t.UECommand,toolbars:t.toolbars,height:118},model:{value:t.AnswerForm.content,callback:function(e){t.$set(t.AnswerForm,"content",e)},expression:"AnswerForm.content"}}),t._v(" "),n("div",{staticClass:"AnswerForm-footer"},[n("div",{staticClass:"AnswerForm-footerContent"},[n("div"),t._v(" "),n("div",{staticClass:"AnswerForm-footerRight"},[n("el-button",{attrs:{type:"primary",size:"medium",loading:t.SubmitAnswerStatus},nativeOn:{click:function(e){return t.SubmitAnswer(e)}}},[t._v("提交回答")])],1)])])],1)]),t._v(" "),n("div",{staticClass:"QuestionAnswers-answers"},[n("div",{staticClass:"Answer-list "},[n("div",{staticClass:"Answer-List-header"},[n("h4",{staticClass:"List-headerText"},[t.AnswerList.length>0?n("span",[t._v(t._s(t.AnswerList.length)+"个回答")]):n("span",[t._v("暂无回答")])])]),t._v(" "),t._l(t.AnswerList,function(e,s){return n("div",{key:s,staticClass:"Answer-list-item"},[n("div",{staticClass:"Answer-user-info"},[n("div",{staticClass:"Answer-user-avatar"},[n("img",{attrs:{src:"http://e.yhtjc.com/v2/public/img/default.png"}})]),t._v(" "),n("div",{staticClass:"Answer-user-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t")])]),t._v(" "),n("div",{staticClass:"RichContent"},[n("div",{staticClass:"RichContent-inner",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),n("p",{staticClass:"RichContent-created"},[n("el-tooltip",{attrs:{effect:"dark",content:e.true_time,placement:"top"}},[n("span",[t._v("发布于 "+t._s(e.created))])])],1)])])})],2)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle"},[e("i",{staticClass:"iconfont icon-dianzan"})])}]};var A=n("VU/8")(v,g,!1,function(t){n("OKck")},"data-v-1b50abbe",null);e.default=A.exports},mXTp:function(t,e,n){"use strict";var s=n("hvtN"),i={props:{defaultMsg:{type:String,default:""},command:{type:String},toolbars:{type:Array,default:function(){return window.UEDITOR_CONFIG.toolbars[0]}},height:{type:Number,default:350}},data:function(){return{config:{initialFrameWidth:null,initialFrameHeight:this.height,serverUrl:s.a.UE_SERVER,toolbars:[this.toolbars]},editor:{}}},mounted:function(){var t=this;this.editor=UE.getEditor("editor",this.config),this.editor.addListener("ready",function(){t.editor.setContent(t.defaultMsg)}),this.editor.addListener("contentChange",function(){t.$emit("input",t.getUEContent())})},methods:{getUEContent:function(){return this.editor.getContent()}},destroyed:function(){this.editor.destroy()},watch:{command:function(t){this.editor.execCommand(t)},defaultMsg:function(t){this.editor.setContent(t)}}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"editor"}})])}]},o=n("VU/8")(i,r,!1,null,null,null);e.a=o.exports}});